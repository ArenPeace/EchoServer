扩展VMware虚拟机的磁盘空间(非增加一个硬盘)
扩展VMware虚拟机的磁盘空间（如C盘这样的系统安装盘），而不是非增加一个虚拟硬盘，增加虚拟硬盘很简单，在VM中图形化操作，可以网络上搜索相关文章，把我实际操作的过程介绍一下。
原先分配了10G的空给虚拟机，后来升级成win2008，空间不够用，增加C盘空间：操作
1.按打开运行对话框，输入“CMD”，回车，打开命令提示符窗口；
2.进入VMware的安装目录（X:\ProgramFiles\VMware\VMwareWorkstation）；
3.输入一些命令vmware-vdiskmanager.exe-x30GB"f:\VM\window2000\Windows2000.vmdk"；
注意：如果虚拟机有还原点，要删除后才能扩展，否则会提示不能扩展（不删除还原点扩展，我没有试验成功，有试验成功的，可以告诉我一下）
1）参数"-X"表示要扩展虚拟机硬盘空间；
2）紧随其后的数字是扩展后的磁盘的大小（是指扩展后磁盘总的大小，包含了原先的磁盘容量）；
3）最后一个参数是虚拟机磁盘文件的完整路径（如果路径中有空格，必须用双引号括起来）。
4.按回车键开始扩展磁盘（扩展磁盘的过程比较慢）；此时命令行窗口会出现"Grow100done",千万不要关闭窗口，此时"f:\VM\window2000"目录下会出现一个windows2000.vmdk.dfgshkgrw-tmp的TMP文件，文件大小不断增加，此时程序正在做增加磁盘空间处理，运行完成后，此tmp文件自动删除。
执行完毕，关闭命令提示符窗口，重新启动VMware，会发现虚拟机硬盘空间已变成30GB了。
5.最后还需要，对虚拟机分区进行调整
1）可以在虚拟机的“计算机管理-磁盘管理”中进行“扩展卷”操作；
2）也可在虚拟机中安装第三方分区工具对虚拟机分区进行调整－－调整C系统盘要用。

#查看挂载点：
df-h
#显示：
文件系统容量已用可用已用%%挂载点
/dev/mapper/vg_dc01-lv_root
47G12G34G25%/
tmpfs504M88K504M1%/dev/shm
/dev/sda1485M31M429M7%/boot

一、扩展VMWare硬盘空间
　　关闭Vmware的Linux系统，这样，才能在VMWare菜单中设置：
　　VM->Settings...->Hardware->HardDisk->Utilities->Expand
　　输入你想要扩展到多少G。本文假设你新增加了30G
二、对新增加的硬盘进行分区、格式化
　　这里进行一个极简化的介绍，非常简化，但很全面，上面已经知道增加了空间的硬盘是/dev/sda。
　　分区：
fdisk/dev/sda　　　　操作/dev/sda的分区表
p　　　　　　　查看已分区数量（我看到有两个/dev/sda1/dev/sda2）
n　　　　　　　新增加一个分区
p　　　　　　　分区类型我们选择为主分区
　　　　　　分区号选3（因为1,2已经用过了，见上）
回车　　　　　　默认（起始扇区）
回车　　　　　　默认（结束扇区）
t　　　　　　　修改分区类型
　　　　　　选分区3
8e　　　　　　修改为LVM（8e就是LVM）
w　　　　　　写分区表
q　　　　　　完成，退出fdisk命令
　　系统提示你重启，重启吧，屌丝们。
开机后，格式化：
mkfs.ext3/dev/sda3
三、添加新LVM到已有的LVM组，实现扩容
lvm　　　　　　　　　　　　　　　　　　进入lvm管理
lvm>pvcreate/dev/sda3　　　　　　　　　这是初始化刚才的分区，必须的
lvm>vgextendvg_dc01/dev/sda3　　　将初始化过的分区加入到虚拟卷组vg_dc01(mapper/VolGroup-lv_root)
lvm>lvextend-L+29.9G/dev/vg_dc01/lv_root　　扩展已有卷的容量（29.9G这个数字在后面解释）
lvm>pvdisplay　　　　　　　　　　　　　　查看卷容量，这时你会看到一个很大的卷了
lvm>quit　　　　　　　　　　　　　　　　　退出
上面那个29.9G怎么来的呢？因为你在VMWare新增加了30G，但这些空间不能全被LVM用了，你可以在上面的lvextend操作中一个一个的试探，比如29.9G,29.8G...直到不报错为止，这样你就可以充分使用新增加的硬盘空间了，当然这是因为我不懂才用的笨办法，高手笑笑就过了吧。（我更不懂啊，原作者，我直接上了29.9G，结果就OK了）
以上只是卷扩容了，下面是文件系统的真正扩容，输入以下命令：
resize2fs/dev/vg_dc01/lv_root
现在，屌丝们，再运行下：df-h
查看下我们机器性感的硬盘吧。



du-h--max-depth=1查看各文件夹大小



